<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Algebra 2 Tutor — Tests</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <main class="layout" style="grid-template-columns:1fr">
    <section class="work">
      <h2>Unit Tests</h2>
      <p class="tiny muted">Open this in your browser. Green = pass, Red = fail.</p>
      <div class="hr"></div>
      <div id="results"></div>
    </section>
  </main>
  <script src="js/core.js"></script>
  <script>
    // tests
    test("polyCombine combines & sorts", ()=>{
      const got = polyCombine([{coef:3,pow:2},{coef:-1,pow:3},{coef:2,pow:2},{coef:5,pow:0}]);
      const txt = polyFormatAscii(got);
      if(txt !== "- x^3 + 5x^2 + 5") throw new Error("got: "+txt);
    });
    test("polyFromAscii parses", ()=>{
      const got = polyFromAscii("-x^3 + 3x^2 - 2x + 6");
      const txt = polyFormatAscii(got);
      if(txt.replace(/\s+/g,'') !== "-x^3+3x^2-2x+6") throw new Error("got: "+txt);
    });
    test("polyEqual true on same poly", ()=>{
      if(!polyEqual(" -x^3+3x^2 -2x+6 ", [{coef:-1,pow:3},{coef:3,pow:2},{coef:-2,pow:1},{coef:6,pow:0}])) throw new Error("equality failed");
    });
  </script>
  <script>
    const out = document.getElementById('results');
    if(window.__tests__){
      const pass = window.__tests__.filter(t=>t.ok).length;
      const total = window.__tests__.length;
      const summary = document.createElement('div');
      summary.className='step'; summary.innerHTML = `<strong>${pass}/${total} passing</strong>`;
      out.appendChild(summary);
      window.__tests__.forEach(t=>{
        const card=document.createElement('div'); card.className='step';
        card.innerHTML = `<div><strong>${t.ok?'✅':'❌'} ${t.name}</strong>${t.ok?'':`<div class="tiny muted">${t.msg||''}</div>`}</div>`;
        out.appendChild(card);
      });
    }
  </script>
</body>
</html>
